<!DOCTYPE html>
<html lang="es">
    <!-- HEAD -->
    <%- include('../partials/head') %>
<body>
  <!-- HEADER -->
 <header class="header error-bg relative">
  <div class="star star1"></div>
  <div class="star star2"></div>
  <div class="star star3"></div>
  <div class="star star4"></div>
  <div class="star star5"></div>
  <div class="star star6"></div>
  <div class="star star7"></div>
  <div class="star star8"></div>
  <!-- LOGO CON LINK AL HOME -->
  <div class="logo">
      <h1 class="logo__title"><a href="/" class="logo__link">SpellBook</a></h1>
      
  </div >
  
    <!-- BURGER MENU -->
  <a href="/admin/addProduct">
    <div class="">
      <i class="far fa-user" id="icon"></i>
    </div>
  </a>
  </header>
  <main>
    <!--LIST OF PRODUCTS SECTION-->
    <section class="product-list">
      <!--LINKS TO Agregar libro, Bell AND user-->
      <h1>Hola <%= locals.userLog.name %>  </h1>
      <div class="belluser">
        <a href="/admin/users" class="display-shop" >Ir a usuarios</a>
        <button class="display-shop" id="button-create">Agregar libro</button>
        <a href="/user/login">
          <div class="">
            <i class="far fa-bell" id="icon"></i>
          </div>
        </a>
        <a href="/user/login">
          <div class="">
            <i class="far fa-user" id="icon"></i>
          </div>
        </a>
      </div>
      <div class="search-table">
        <h2>Libros</h2>
        <label name="search" id="search" >
          <i class="fas fa-search "></i>
          <input class="" type="search" name="search" id="" placeholder="">
        </label>
      </div>
      <div class="products-table">
        <table>
          <thead>
            <tr class="head-table">
              <th>Imagen</th>
              <th class="description-on">Descripcion</th>
              <th>Título</th>
              <th>Cantidad</th>
              <th>Precio</th>
              <th>Estado</th>
              <th> </th>
              <th> </th>
            </tr>
          </thead> 
          <tbody>
             
                <% products.forEach(book => { %>
                  
                <tr>
                 
                  <td>  <a href="/product/<%= book.id %>"><img src="/images/Libros/<%= book.image%>"></a></td>
                  <td class="description-on"><a href="/product/<%= book.id %>"><%=  book.description.slice(0 , 200) %> ...</a></td>
                  <td><a href="/product/<%= book.id %>"><%= book.title%></a></td>
                  <td><a href="/product/<%= book.id %>"><%= book.stock%></a></td>
                  <td><a href="/product/<%= book.id %>"><%= book.price%></a></td>
                  <td><a href="/product/<%= book.id %>">Activo</a></td>
                
                  <td>
                    <a href="/admin/editProduct/<%= book.id %>" class="button-edit">
                        <i class="fas fa-pen"></i>
                    </a>
                  </td>
                  <td>
                    <form action="deleteProduct/<%=book.id%>?_method=DELETE" id="button-delete" method="POST">
                      <button class="btn-delete" type="submit"><i class="far fa-trash-alt"></i></button>
                    </form>
                  </td>   
                                 
                </tr>       
                <% }) %>

            </tbody>
        </table>
      </div>
    </section>
<!-- CREATE FORM -->
    <section class="product-form">
      <div class="internal-modal">
        <div class="close-create">
          <i class="fas fa-times" id="icon" aria-hidden="true"></i>
        </div>
        <div class="add-btn"><h2 id="shop-form">Agregar libro</h2></div>
        <div class="errors">
        </div>
        <form method="POST" action="/admin/addProduct" enctype="multipart/form-data" id="product">
          <fieldset>
            <label for="title">Título:</label>
            <input
              type="text"
              name="titulo"
              id="title"
            
            />
          </fieldset>
          <fieldset>
            <label for="autor">Autor:</label>
            <select name="autor" id="" class="select-fcm border-fcm">
              <% authors.forEach(author => { %>
                  <option value="<%= author.id %>" ><%= author.name %></option>
              <% }); %>
          </select>
          </fieldset>
          <fieldset>
            <label for="amount">Stock:</label>
            <input
              type="number"
              name="cantidad"
              id="amount"
              
            />
          </fieldset>
          <fieldset>
            <label for="price">Precio:</label>
            <input
                type="text"
                id="price"
                name="precio"
                
            />
          </fieldset>
          <fieldset>
            <label for="descripcion">Edad Recomendada:</label>
            <select name="recommended_age" id="" class="select-fcm border-fcm">
              <% recommended_age.forEach(age => { %>
                  <option value="<%= age.id %>"><%= age.age %></option>
              <% }); %>
          </select>
          </fieldset>

          <fieldset>
            <label for="descripcion">Editorial:</label>
            <input
              type="textarea"
              name="publisher"
              id="publisher"
              
              
            />
          </fieldset>

          <fieldset>
            <label for="descripcion">Idioma:</label>
            <input
              type="textarea"
              name="language"
              id="language"
              
              
            />
          </fieldset>

          <fieldset>
            <label for="descripcion">Año de Publicación:</label>
            <input
              type="textarea"
              name="publication_year"
              id="publication_year"
              
              
            />
          </fieldset>

          <fieldset>
            <label for="descripcion">Nro de Páginas:</label>
            <input
              type="textarea"
              name="pages"
              id="pages"
            />
          </fieldset>
          <fieldset>
            <label for="image">Imagen:</label>
            <input type="file" name="imagen" id="image" />
          </fieldset>

          <fieldset>
            <label for="descripcion">Descripción:</label>
            <input
              type="textarea"
              name="descripcion"
              id="description"
              cols = "30"
              rows = "8"
            />
          </fieldset>


          
          <fieldset>
            <!-- <input class="delete" type="reset" value="Borrar"> -->
            <button class="display-shop button" type="reset" id="cancel"> Cancelar </button>
            <button class="display-shop" type="submit" > Guardar</button>
          </fieldset>
        </form>
      </div>
    </section>


    

  </main>
  <script src="/js/admin.js"></script>
</body>
</html>